library(caret)
?confusionMatrix
pred_hired=predict(controlled.hired7.p)
confusionMatrix(data=pred_hired, testing$Class)
confusionMatrix(data=pred_hired)
confusionMatrix(Hired_dummy,pred_hired,cutoff=0.5)
confusionMatrix(data=pred_hired,cutoff=0.5)
confusionMatrix(data=pred_hired,passed.dataset2$Hired_dummy)
pred_hired=predict(controlled.hired7.p)
pred_hired=predict(controlled.hired7.p,passed.dataset2)
confusionMatrix(passed.dataset2$Hired_dummy,pred_hired)
pred_hired=predict(controlled.hired7.p,data=passed.dataset2)
confusionMatrix(passed.dataset2$Hired_dummy,pred_hired)
controlled.hired8.probs=predict(controlled.hired8.p,type="response")
?contrasts
contrasts(Hired_dummy)
length(controlled.hired8.probs)
glm.pred=rep("Down", 177)
glm.pred[controlled.hired8.probs>.5]="Up"
table(glm.pred, Hired_dummy)
table(glm.pred, passed_dataset2$Hired_dummy)
table(glm.pred, passed.dataset2$Hired_dummy)
controlled.hired8.probs=predict(controlled.hired8.p,type="response")
controlled.hired8.probs[1:10]
glm.pred=rep(0, 177)
glm.pred[controlled.hired8.probs>.5]=1
table(glm.pred, passed.dataset2$Hired_dummy)
passed.dataset2$Hired_dummy
length(passed.dataset2$Hired_dummy)
table(glm.pred, passed.dataset2$Hired_dummy[passed.dataset2$Age.Panel!=NA])
passed.dataset2$Hired_dummy[passed.dataset2$Age.Panel!=NA]
passed.dataset2$Hired_dummy[passed.dataset2$Age.Panel!=NA,]
?subset
subset(passed.dataset2, Age.Panel != NA)
subset(passed.dataset2, !is.na(passed.dataset2[,"Age.Panel"]))
length(subset(passed.dataset2, !is.na(passed.dataset2[,"Age.Panel"])))
length(subset(passed.dataset2, (!is.na(passed.dataset2[,"Age.Panel"]))))
subset=na.omit(passed.dataset2)
length(subset)
length(passed.dataset2$Age.Panel)
length(glm.pred)
controlled.hired8.p
length(passed.dataset2)
passed.dataset = subset(MCdata, Passed_MC ==1)
passed.dataset2 = subset(MCdata_subset, Passed_MC ==1)
length(passed.dataset2)
dim(passed.dataset2)
dim(subset)
second.model.data= subset(passed.dataset2, !is.na(passed.dataset2[,"Age.Panel"]))
dim(second.model.data)
table(glm.pred, second.model.data$Hired_dummy)
secondmod.data= subset(passed.dataset2, !is.na(passed.dataset2[,"Age.Panel"]))
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]/2)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
set.seed(123)
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
tablea(pred.glm, secondmod.data[-train, ]$Hired_dummy)
table(pred.glm, secondmod.data[-train, ]$Hired_dummy)
13+27
177/3
93/135
93/110
27/(9+27)
84.55+37.31
121.86/2
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
table(pred.glm, secondmod.data[-train, ]$Hired_dummy)
9/(9+27)
13/23
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
controlled7.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector+urr:female, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled7.fitprob)
probs2 = predict(controlled7.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm2 <- rep(0, length(probs2))
pred.glm2[probs2 > 0.5] <- 1
mean(pred.glm2 != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
table(pred.glm2, secondmod.data[-train, ]$Hired_dummy)
30/41
94/110
27/(9+27)
set.seed(12)
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
controlled7.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector+urr:female, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled7.fitprob)
probs2 = predict(controlled7.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm2 <- rep(0, length(probs2))
pred.glm2[probs2 > 0.5] <- 1
mean(pred.glm2 != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
set.seed(123)
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
controlled7.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector+urr:female, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled7.fitprob)
probs2 = predict(controlled7.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm2 <- rep(0, length(probs2))
pred.glm2[probs2 > 0.5] <- 1
mean(pred.glm2 != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
set.seed(1)
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
controlled7.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector+urr:female, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled7.fitprob)
probs2 = predict(controlled7.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm2 <- rep(0, length(probs2))
pred.glm2[probs2 > 0.5] <- 1
mean(pred.glm2 != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
set.seed(13)
train = sample(dim(secondmod.data)[1],dim(secondmod.data)[1]*2/3)
controlled8.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled8.fitprob)
probs = predict(controlled8.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm <- rep(0, length(probs))
pred.glm[probs > 0.5] <- 1
mean(pred.glm != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
controlled7.fitprob=glm(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel+PhD:public.sector+urr:female, data=secondmod.data,subset=train,family=binomial(link="probit"))
summary(controlled7.fitprob)
probs2 = predict(controlled7.fitprob, newdata = secondmod.data[-train, ], type = "response")
pred.glm2 <- rep(0, length(probs2))
pred.glm2[probs2 > 0.5] <- 1
mean(pred.glm2 != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
table(pred.glm2, secondmod.data[-train, ]$Hired_dummy)
(5+18)/(18+28+13)
mean(pred.glm2 != secondmod.data[-train, ]$Hired_dummy) #compute the validation set error
base.hired9.p.mfx=probitmfx(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+Age.Panel, data= MCdata_subset, robust = TRUE)
base.hired.df = data.frame(base.hired9.p.mfx$mfxest)
base.hired.df["Variables"]=rownames(base.hired.df)
base.hired.df["Marginal.Effects"]=round(base.hired.df$dF.dx*100,digits = 1)
base.hired.df
ggplot(base.hired.df, aes(x=reorder(Variables, -Marginal.Effects), y=Marginal.Effects))+
geom_bar(stat="identity", aes(col = base.hired.df$P..z.<0.1),fill="steelblue3", size=1)+
scale_colour_manual(name = 'Statistically significant',values = setNames(c("red","white"),c(T,F)), breaks=T, labels = T ) +
xlab('Variables') + ylab('Effects on Pr{Hired}')+
geom_text(aes(label = paste(base.hired.df$Marginal.Effects,"%"),vjust=ifelse(base.hired.df$Marginal.Effects>=0,-1,2)),size=3.5)+
ggtitle("Effects of Variables on Pr{Hired}\nBase Model 2")+
theme_few()+
theme(plot.title=element_text(face ="bold",size=20,hjust=0.5,vjust=0.25), axis.title = element_text(size=15))+
theme(axis.text.x=element_text(angle=45,hjust=1, vjust =1,size=13), axis.text.y = element_text(size=13))+
ylim(-40,40)+
theme(legend.justification = c(1.05, 1.5), legend.position = c(1, 1), legend.text = element_text(colour = "white"),legend.direction = "horizontal",legend.title = element_text(size=15))
base.hired9.p.mfx=probitmfx(Hired_dummy~female+urr+OED+Mission+IMF+Age.Panel, data= MCdata_subset, robust = TRUE)
base.hired.df = data.frame(base.hired9.p.mfx$mfxest)
base.hired.df["Variables"]=rownames(base.hired.df)
base.hired.df["Marginal.Effects"]=round(base.hired.df$dF.dx*100,digits = 1)
ggplot(base.hired.df, aes(x=reorder(Variables, -Marginal.Effects), y=Marginal.Effects))+
geom_bar(stat="identity", aes(col = base.hired.df$P..z.<0.1),fill="steelblue3", size=1)+
scale_colour_manual(name = 'Statistically significant',values = setNames(c("red","white"),c(T,F)), breaks=T, labels = T ) +
xlab('Variables') + ylab('Effects on Pr{Hired}')+
geom_text(aes(label = paste(base.hired.df$Marginal.Effects,"%"),vjust=ifelse(base.hired.df$Marginal.Effects>=0,-1,2)),size=3.5)+
ggtitle("Effects of Variables on Pr{Hired}\nBase Model 2")+
theme_few()+
theme(plot.title=element_text(face ="bold",size=20,hjust=0.5,vjust=0.25), axis.title = element_text(size=15))+
theme(axis.text.x=element_text(angle=45,hjust=1, vjust =1,size=13), axis.text.y = element_text(size=13))+
ylim(-40,40)+
theme(legend.justification = c(1.05, 1.5), legend.position = c(1, 1), legend.text = element_text(colour = "white"),legend.direction = "horizontal",legend.title = element_text(size=15))
ggplot(base.hired.df, aes(x=reorder(Variables, -Marginal.Effects), y=Marginal.Effects))+
geom_bar(stat="identity", aes(col = base.hired.df$P..z.<0.1),fill="steelblue3", size=1)+
scale_colour_manual(name = 'Statistically significant',values = setNames(c("red","white"),c(T,F)), breaks=T, labels = T ) +
xlab('Variables') + ylab('Effects on Pr{Hired}')+
geom_text(aes(label = paste(base.hired.df$Marginal.Effects,"%"),vjust=ifelse(base.hired.df$Marginal.Effects>=0,-1,2)),size=3.5)+
ggtitle("Effects of Variables on Pr{Hired}\nBase Model 2")+
theme_few()+
theme(plot.title=element_text(face ="bold",size=20,hjust=0.5,vjust=0.25), axis.title = element_text(size=15))+
theme(axis.text.x=element_text(angle=45,hjust=1, vjust =1,size=13), axis.text.y = element_text(size=13))+
ylim(-30,30)+
theme(legend.justification = c(1.05, 1.5), legend.position = c(1, 1), legend.text = element_text(colour = "white"),legend.direction = "horizontal",legend.title = element_text(size=15))
ggsave("Base_hired2.png")
controlled.hired9.p.mfx=probitmfx(Hired_dummy~female+urr+OED+Mission+IMF+Age.Panel, data=passed.dataset2, robust = TRUE)
controlled.hired9.p.mfx
controlled.hired9.p.mfx=probitmfx(Hired_dummy~female+urr+OED+Mission+IMF+public.sector+PhD+MF_experience+Age.Panel, data=passed.dataset2, robust = TRUE)
controlled.hired9.p.mfx
controlled.hired.df = data.frame(controlled.hired9.p.mfx$mfxest)
controlled.hired.df["Variables"]=rownames(controlled.hired.df)
controlled.hired.df["Marginal.Effects"]=round(controlled.hired.df$dF.dx*100,digits = 1)
ggplot(controlled.hired.df, aes(x=reorder(Variables, -Marginal.Effects), y=Marginal.Effects))+
geom_bar(stat="identity", aes(col = controlled.hired.df$P..z.<=0.1),fill="steelblue3", size=1)+
scale_colour_manual(name = 'Statistically significant',values = setNames(c("red","white"),c(T,F)), breaks=T, labels = T ) +
xlab('Variables') + ylab('Effects on Pr{Hired}')+
geom_text(aes(label = paste(controlled.hired.df$Marginal.Effects,"%"),vjust=ifelse(controlled.hired.df$Marginal.Effects>=0,-1,2)),size=3.5)+
ggtitle("Effects of Variables on Pr{Hired}\nSecond Model 1")+
labs(subtitle="(Among those who passed the MC panel)")+
theme_few()+
theme(plot.title=element_text(face ="bold",size=20,hjust=0.5,vjust=0.25), axis.title = element_text(size=15),plot.subtitle = element_text(size=15,hjust=0.5,vjust=0.25))+
theme(axis.text.x=element_text(angle=45,hjust=1, vjust =1,size=13), axis.text.y = element_text(size=13))+
ylim(-40,40)+
theme(legend.justification = c(1.05, 1.5), legend.position = c(1, 1), legend.text = element_text(colour = "white"),legend.direction = "horizontal",legend.title = element_text(size=15))
ggsave("Controlled_hired1.png")
MCdata <- read.csv("~/Desktop/R Projects/MCproject/MCdata_cleaned_v2.csv")
names(MCdata)
summary(MCdata)
library(ISLR)
library(memisc)
library(gmodels)
library(aod)
library(tigerstats)
library(vcd)
library(ggplot2)
library(xlsx)
library(lmtest)
library(sandwich)
library(foreign)
attach(MCdata)
MCdata['male']=ifelse(female==0,1,0)
MCdata['train_index']=ifelse(MCdata$Dateofpanel == '3/1/2017', 0,1)
MCdata_subset = MCdata[train_index==1,]
Candidate.URRFemale = sum(MCdata$female == 1 & MCdata$urr ==1)
Candidate.URRMale = sum(MCdata$female == 0 & MCdata$urr ==1)
Candidate.nonURRFemale = sum(MCdata$female == 1 & MCdata$urr==0)
Candidate.nonURRMale = sum(MCdata$female == 0 & MCdata$urr == 0)
Passed.URRFemale = sum(MCdata$Passed_MC == 1 & MCdata$female == 1 & MCdata$urr == 1)
Passed.URRMale = sum(MCdata$Passed_MC == 1 & MCdata$female == 0 & MCdata$urr ==1)
Passed.nonURRFemale = sum(MCdata$Passed_MC == 1 & MCdata$female == 1 & MCdata$urr==0)
Passed.nonURRMale = sum(MCdata$Passed_MC == 1 & MCdata$female == 0 & MCdata$urr == 0)
Hired.URRFemale = sum(MCdata$Hired_dummy == 1 & MCdata$female == 1 & MCdata$urr ==1)
Hired.URRMale = sum(MCdata$Hired_dummy == 1 & MCdata$female == 0 & MCdata$urr ==1)
Hired.nonURRFemale = sum(MCdata$Hired_dummy == 1 & MCdata$female == 1 & MCdata$urr==0)
Hired.nonURRMale = sum(MCdata$Hired_dummy == 1 & MCdata$female == 0 & MCdata$urr == 0)
sum(Candidate.URRFemale,Candidate.URRMale,Candidate.nonURRFemale,Candidate.nonURRMale)
sum(Passed.URRFemale,Passed.URRMale,Passed.nonURRFemale,Passed.nonURRMale)
sum(Hired.URRFemale,Hired.URRMale,Hired.nonURRFemale,Hired.nonURRMale)
Candidate.URRFemale
Candidate.URRMale
Candidate.nonURRFemale
Candidate.nonURRMale
Passed.URRFemale
Passed.URRMale
Passed.nonURRFemale
Passed.nonURRMale
Hired.URRFemale
Hired.URRMale
Hired.nonURRFemale
Hired.nonURRMale
cor(dept_data[2:12])
dept_data=read.csv('department_hiring.csv')
library(readr)
department_hiring <- read_csv("~/Desktop/R Projects/department_hiring.csv")
View(department_hiring)
dept_data=read_csv("~/Desktop/R Projects/department_hiring.csv")
dept_data=read_csv("~/Desktop/R Projects/department_hiring.csv")
names(dept_data)
pairs(dept_data[,2:11])
attach(dept_data)
dept_data['inter_flow']=internalhires-(interdept_moveout+separation)
plot(inter_flow, externalhires, col='red')
dept_data['inter_flow']=internalhires-(interdept_moveout+separation)
plot(inter_flow, externalhires, col='red')
cor(dept_data[2:12])
plot(interfemale_out,interdept_moveout)
plot(inter_flow,internalhires)
library(ggplot2)
plot(dept, internalfemale_in)
dept_data['total_out']=interdept_moveout+separation
cor(dept_data[2:13])
plot(inter_flow, externalhires)
cor(inter_flow, externalhires)
df.bar=barplot(externalhires, names.arg = dept)
lines(x=df.bar, y = inter_flow)
installed.packages('ggplot2')
install.packages('ggthemes')
library(ggplot2)
library(ggthemes)
dept_move=read.csv('dept_movements.csv')
library(readr)
dept_movements <- read_csv("~/Desktop/R Projects/dept_movements.csv")
View(dept_movements)
dept_move=read_csv("~/Desktop/R Projects/dept_movements.csv")
summary(dept_move)
names(dept_move)
row_name=dept_move[,1]
rownames(dept_move)=row_name
plot=ggplot(dept_move, aes(transfer_in,transfer_out))+
geom_label(aes(fill=dept_type), fontface='bold',color = 'white',label=rownames(dept_move),show.legend=FALSE)+
scale_x_continuous(name="Percent of URR staff transferring in",limits=c(0,80))+
scale_y_continuous(name="Percent of URR staff transferring out", limits=c(0,80))
plot1=plot+geom_abline(slope=1, intercept=0,lwd=0.5)+theme_bw()
plot1
df_poly <- data.frame(
x=c(-Inf, Inf, -Inf),
y=c(-Inf, Inf, Inf)
)
plot2=plot1+geom_polygon(data=df_poly, aes(x=y,y=x), fill='orange',alpha=0.1)
plot2
plot1
plot3=ggplot(dept_move, aes(In, Out))+
geom_label(aes(fill=dept_type), fontface='bold',color = 'white',label=rownames(dept_move),show.legend=FALSE)+
scale_x_continuous(name="Percent of URR staff transferring in",limits=c(0,70))+
scale_y_continuous(name="Percent of URR staff transferring out", limits=c(0,70))+
geom_abline(slope=1, intercept=0,lwd=0.5)+theme_bw()
plot3
plot=ggplot(dept_move, aes(transfer_in,transfer_out))+
geom_label(aes(fill=dept_type), fontface='bold',color = 'white',label=rownames(dept_move),show.legend=FALSE)+
scale_x_continuous(name="Percent of URR staff transferring in",limits=c(0,80))+
scale_y_continuous(name="Percent of URR staff transferring out", limits=c(0,80))
plot1=plot+geom_abline(slope=1, intercept=0,lwd=0.5)+theme_bw()
plot1
df_poly <- data.frame(
x=c(-Inf, Inf, -Inf),
y=c(-Inf, Inf, Inf)
)
plot2=plot1+geom_polygon(data=df_poly, aes(x=y,y=x), fill='orange',alpha=0.1)
plot2
library(ggplot2)
library(ggthemes)
dept_move=read.csv('dept_movements.csv')
qt(0.01, 40)
level = c(2,5,9,7)
income = c(30,40,50,60)
lm.fit = lm(income ~ level)
summary(lm.fit)
1.743^2
qt(.975, 2)
(3.551-3)/1.74
library(ggplot2)
library(ISLR)
library(MASS)
library(lmtest)
library(ggthemes)
library(xlsx)
library(lmtest)
library(sandwich)
library(foreign)
path = "/Users/Hailey/Documents/GitHub/HousingPrice"
setwd(dir = path)
load("data/compiled_data.RData")
housedata = compiled_data
edu_data = read.csv("Chicago_edu_data/Chicago_school_area_ratings.csv")
edu_data
summary(housedata)
dim(housedata)
dim(edu_data)
summary(edu_data)
edu_data[['Community.Area.Number','Percent_level1','Percent_level2']]
edu_data[c('Community.Area.Number','Percent_level1','Percent_level2')]
data_final = merge(housedata, edu_data[c('Community.Area.Number','Percent_level1','Percent_level2')],
by.x = 'community_no', by.y = 'Community.Area.Number' )
dim(data_final)
dim(housedata)
summary(data_final)
View(data_final)
class(data_final$num_cta_1mile)
data_final$num_cta_1mile = as.numeric(data_final$num_cta_1mile)
class(data_final$num_cta_1mile)
colnames(data_final)[colnames(data_final)=="Percent_level1"] <- "percent_level1_school"
colnames(data_final)[colnames(data_final)=="Percent_level2"] <- "percent_level2_school"
summary(data_final)
data_final$min_dist_cta = as.numeric(data_final$min_dist_cta)
class(data_final$num_cta_1mile)
class(data_final$min_dist_cta)
save(final_data, file = 'final_data.RData')
save(data_final, file = 'data_final.RData')
table(data_final$PROPERTY_TYPE)
table(data_final$LOCATION)
factor(data_final$PROPERTY_TYPE)
help(factor)
factor(data_final$PROPERTY_TYPE, levels = c("Condo_coop", "single_fam_res", "townhouse"))
View(data_final)
library(caret)
dummyVars(~ PROPERTY_TYPE, data = data_final)
data_final
data_final = dummyVars(~ PROPERTY_TYPE, data = data_final)
path = "/Users/Hailey/Documents/GitHub/HousingPrice"
setwd(dir = path)
load("data/compiled_data.RData")
housedata = compiled_data
dim(housedata)
edu_data = read.csv("Chicago_edu_data/Chicago_school_area_ratings.csv")
dim(edu_data)
data_final = merge(housedata, edu_data[c('Community.Area.Number','Percent_level1','Percent_level2')],
by.x = 'community_no', by.y = 'Community.Area.Number' )
colnames(data_final)[colnames(data_final)=="Percent_level1"] <- "percent_level1_school"
colnames(data_final)[colnames(data_final)=="Percent_level2"] <- "percent_level2_school"
summary(data_final)
data_final$num_cta_1mile = as.numeric(data_final$num_cta_1mile)
data_final$min_dist_cta = as.numeric(data_final$min_dist_cta)
class(data_final$num_cta_1mile)
class(data_final$min_dist_cta)
dmy = dummyVars(~ PROPERTY_TYPE, data = data_final)
View(dmy)
dmy
data_4_model = data.frame(predict(dmy, newdata = data_final))
data_4_model
View(data_4_model)
dmy = dummyVars(~ PROPERTY_TYPE, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
data_model = cbind(data_final, data_dmy)
data_model
View(data_model)
View(data_model)
summary(data_model)
data_model = data_mode[,!rm_cols]
rm_cols = c('community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential')
data_model = data_model[,!rm_cols]
data_model = subset(data_model, select=-rm_cols)
data_model = within(data_model, rm('community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential'))
summary(data_model)
unique(data_final$ZIP)
count(unique(data_final$ZIP))
size(unique(data_final$ZIP))
summary(unique(data_final$ZIP))
unique(data_final$ZIP)
dmy = dummyVars(~ PROPERTY_TYPE + ZIP, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
View(data_dmy)
dmy = dummyVars(~ PROPERTY_TYPE, data = data_final)
dmy1 = dummyVars(~ ZIP, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
data_dmy1 = data.frame(predict(dmy1, newdata = data_final))
data_final$ZIP = as.factor(data_final$ZIP)
dmy = dummyVars(~ PROPERTY_TYPE, data = data_final)
dmy1 = dummyVars(~ ZIP, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
data_dmy1 = data.frame(predict(dmy1, newdata = data_final))
data_model = cbind(data_final, data_dmy, data_dmy1)
summary(data_model)
data_model_f = within(data_model, rm('community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential','ZIP.60827'))
summary(data_model_f)
data_model_f = within(data_model, rm('ZIP','community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential','ZIP.60827'))
summary(data_model_f)
path = "/Users/Hailey/Documents/GitHub/HousingPrice"
setwd(dir = path)
load("data/compiled_data.RData")
housedata = compiled_data
dim(housedata)
edu_data = read.csv("Chicago_edu_data/Chicago_school_area_ratings.csv")
dim(edu_data)
data_final = merge(housedata, edu_data[c('Community.Area.Number','Percent_level1','Percent_level2')],
by.x = 'community_no', by.y = 'Community.Area.Number' )
dim(data_final)
colnames(data_final)[colnames(data_final)=="Percent_level1"] <- "percent_level1_school"
colnames(data_final)[colnames(data_final)=="Percent_level2"] <- "percent_level2_school"
summary(data_final)
data_final$num_cta_1mile = as.numeric(data_final$num_cta_1mile)
data_final$min_dist_cta = as.numeric(data_final$min_dist_cta)
class(data_final$num_cta_1mile)
class(data_final$min_dist_cta)
save(data_final, file = 'data_final.RData')
table(data_final$PROPERTY_TYPE)
unique(data_final$ZIP)
data_final$ZIP = as.factor(data_final$ZIP)
dmy = dummyVars(~ PROPERTY_TYPE, data = data_final)
dmy1 = dummyVars(~ ZIP, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
data_dmy1 = data.frame(predict(dmy1, newdata = data_final))
data_model = cbind(data_final, data_dmy, data_dmy1)
summary(data_model)
data_model_f = within(data_model, rm('ZIP','community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential','ZIP.60827'))
summary(data_model_f)
save(data_model_f, file = 'data_model.RData')
data_final$community_no = as.factor(data_final$community_no)
dmy2 = dummyVars(~ community_no, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
data_dmy2 = data.frame(predict(dmy2, newdata = data_final))
data_model = cbind(data_final, data_dmy, data_dmy2)
summary(data_model)
data_model_f = within(data_model, rm('ZIP','community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential','community_no.77'))
load("data/compiled_data.RData")
housedata = compiled_data
edu_data = read.csv("Chicago_edu_data/Chicago_school_area_ratings.csv")
dim(edu_data)
data_final = merge(housedata, edu_data[c('Community.Area.Number','Percent_level1','Percent_level2')],
by.x = 'community_no', by.y = 'Community.Area.Number' )
colnames(data_final)[colnames(data_final)=="Percent_level1"] <- "percent_level1_school"
colnames(data_final)[colnames(data_final)=="Percent_level2"] <- "percent_level2_school"
data_final$num_cta_1mile = as.numeric(data_final$num_cta_1mile)
data_final$min_dist_cta = as.numeric(data_final$min_dist_cta)
class(data_final$num_cta_1mile)
class(data_final$min_dist_cta)
save(data_final, file = 'data_final.RData')
data_final$community_no = as.factor(data_final$community_no)
dmy = dummyVars(~ PROPERTY_TYPE, data = data_final)
dmy2 = dummyVars(~ community_no, data = data_final)
data_dmy = data.frame(predict(dmy, newdata = data_final))
data_dmy2 = data.frame(predict(dmy2, newdata = data_final))
data_model = cbind(data_final, data_dmy, data_dmy2)
summary(data_model)
data_model_f = within(data_model, rm('ZIP','community_no','PROPERTY_TYPE','LOCATION','URL','PROPERTY_TYPESingle.Family.Residential','community_no.77'))
save(data_model_f, file = 'data_model.RData')
